---
layout: post
title: "Color Scheming with Javascript"
date: 2011-01-21
comments: false
url: /2011/01/color-scheming.html/2011-01-21-color-scheming.html
tags:
 - javascript
 - color
 - visualization
---

<div class='post'>
In this post, I'll share some of my Javascript code for manipuating colors.<br /><br />I started a few months back with <b>basic color manipulation routes</b>. Other libraries take a strictly object-oriented approach. This can be a little heavyweight, as it requires explicit conversions throughout the calling code. But in the HTML DOM, colors are generally expressed as hex strings, and if we have routines were built around these, they would be simpler to use. Plus, Javascript is dynamic language, so a String could have color manipulation methods. That's exactly what I did:<br /><ul><li><code>'#fff'.toHexColor() =&gt; '#ffffff'</code></li><li><code>'black'.toHexColor() =&gt; '#000000'</code></li><li><code>'#123456'.toHexColor() =&gt; '#123456' (no op)</code></li><li><code>colorString.toRGB() =&gt; array of numbers [0..255]</code></li><li><code>colorString.toHSL() =&gt; array of numbers [[0..360],[0-100],[0-100]]</code></li></ul>These building blocks aren't that exciting, but are very helpful to build color manipulation functions on:<br /><ul><li><code>"#ab342c".darken(%)</code>&nbsp;-- make color darker by given percent</li><li><code>"#ab342c".lighten(%)</code>&nbsp;-- make color lighter by given percent</li><li><code>"#ab342c".saturate(%)</code>&nbsp;-- make color more saturated by given percent. To&nbsp;<i style="line-height: 1.4em; margin: 0px; padding: 0px;">desaturate</i>, use negative values for the percent. Note that<code>"#ab342c".saturate(-100)</code>&nbsp;renders in grayscale.</li></ul><b>Generating new colors</b><br />Sometimes, you just need a color to get you started:<br /><ul><li><code>ColorFactory.random() // a random color, somewhat evenly distributed.</code></li><li><code>ColorFactory.randomGray() // a random gray scale value.</code></li><li><code>ColorFactory.randomHue()  // given a saturation and lightness returns a random color.</code></li></ul>or &nbsp;primary and secondary color schemes:<br /><a href="http://3.bp.blogspot.com/_RZ6yXxZ1RUA/TUXxf4G1QYI/AAAAAAAAAx8/5ounQ4VuJJQ/s1600/primary.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/_RZ6yXxZ1RUA/TUXxf4G1QYI/AAAAAAAAAx8/5ounQ4VuJJQ/s1600/primary.png" /></a><br /><br /><b>Basic color theory</b> includes the concepts of complementary and analogous colors, so they are provided:<br /><br /><a href="http://2.bp.blogspot.com/_RZ6yXxZ1RUA/TUXxfP3scmI/AAAAAAAAAx0/QhUt5soKwqA/s1600/complementary.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/_RZ6yXxZ1RUA/TUXxfP3scmI/AAAAAAAAAx0/QhUt5soKwqA/s1600/complementary.png" /><span class="Apple-style-span" style="color: black;">&nbsp;</span></a><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_RZ6yXxZ1RUA/TUXxepqDDUI/AAAAAAAAAxs/U_b9CtM9vGQ/s1600/analagous.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em; text-align: left;"><img border="0" src="http://1.bp.blogspot.com/_RZ6yXxZ1RUA/TUXxepqDDUI/AAAAAAAAAxs/U_b9CtM9vGQ/s1600/analagous.png" /></a></div><br /><br /><br /><div class="separator" style="clear: both; text-align: left;">And there is a generic "interpolation" beween two colors. It works interpolating hues, saturation or lightness:</div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_RZ6yXxZ1RUA/TUXxfvhTm3I/AAAAAAAAAx4/GmZu38iAUUY/s1600/interpolate.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="171" src="http://2.bp.blogspot.com/_RZ6yXxZ1RUA/TUXxfvhTm3I/AAAAAAAAAx4/GmZu38iAUUY/s400/interpolate.png" width="400" /></a></div><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><b>Generating Schemes for Visualizations</b><br />Now that we have all the building blocks, we can start building schemes for specific purposes. (<a href="http://www.personal.psu.edu/cab38/ColorSch/Schemes.html">Schemes get applied in specific ways</a>). For example, if colors are used to represent a <i>quantitative range of values</i>, the colors must visually read as such. The most straightforward way to do this is to linearly lay them out in a monochromatic scheme.&nbsp;Your eye can read "that value is more than that value" because of the visual relationship, in either saturation or lightness.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_RZ6yXxZ1RUA/TUXxgq62DEI/AAAAAAAAAyE/PZj0a6GIXDk/s1600/sequential.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="117" src="http://1.bp.blogspot.com/_RZ6yXxZ1RUA/TUXxgq62DEI/AAAAAAAAAyE/PZj0a6GIXDk/s400/sequential.png" width="400" /></a></div><br />This differs from <i>qualitatively distinct values</i> (such as states on a modern election map), which must be read as distinct, but not qualitatively related. A triadic approach is more appropriate in this case. A viewer should at no point be enticed into imaging a "red" state is more or less of something than a "blue" state-- they are distinct categories.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_RZ6yXxZ1RUA/TUXxgDAt0JI/AAAAAAAAAyA/FUjtttnXYm4/s1600/qualitative.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="112" src="http://2.bp.blogspot.com/_RZ6yXxZ1RUA/TUXxgDAt0JI/AAAAAAAAAyA/FUjtttnXYm4/s400/qualitative.png" width="400" /></a></div><br /><a href="http://2.bp.blogspot.com/_RZ6yXxZ1RUA/TUXxe2W4twI/AAAAAAAAAxw/-KdweZuaT8U/s1600/binary.png" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="112" src="http://2.bp.blogspot.com/_RZ6yXxZ1RUA/TUXxe2W4twI/AAAAAAAAAxw/-KdweZuaT8U/s320/binary.png" width="320" /></a>Sometimes visualizations include <i>binary</i>, yes/no values. And some data visualizations are about how the values diverge, where values need to read from as quantitatively diverging from a central value. These are challenging to construct so that they read correctly, and cartographers are experts at this.<br /><br />I've in the process of building <a href="http://github.com/ndp/jsutils">a set up Javascript functions</a> that support this type of color scheme generation. It's still a work in progress, but I have found it quite valuable. I'm curious if others find this useful.</div>
